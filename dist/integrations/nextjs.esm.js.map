{"version":3,"file":"nextjs.esm.js","sources":["../../src/core/types.ts","../../src/core/config.ts","../../src/adapters/console.ts","../../src/adapters/memory.ts","../../src/adapters/database.ts","../../src/adapters/file.ts","../../src/utils/uuid.ts","../../src/core/logger.ts","../../src/integrations/nextjs.ts"],"sourcesContent":[null,null,null,null,null,null,null,null,null],"names":["LogLevel","LogStrategy","DEFAULT_CONFIG","strategy","process","env","NODE_ENV","HYBRID","CONSOLE","level","WARN","DEBUG","maxMemoryEntries","parseInt","LOG_MAX_MEMORY_ENTRIES","maxDatabaseEntries","LOG_MAX_DATABASE_ENTRIES","maxFileEntries","LOG_MAX_FILE_ENTRIES","enableConsole","enableDatabase","enableFile","databaseTable","filePath","LOG_FILE_PATH","maxFileSize","LOG_MAX_FILE_SIZE","maxFiles","LOG_MAX_FILES","format","includeStack","includeMetadata","ConsoleAdapter","constructor","this","name","config","configure","log","entry","timestamp","toISOString","levelName","contextStr","context","JSON","stringify","metadataStr","metadata","logMessage","message","error","stack","INFO","ERROR","FATAL","MemoryAdapter","logs","push","maxEntries","length","slice","getLogs","limit","getErrorLogs","errorLogs","filter","clear","getStats","errorCount","count","errors","DatabaseAdapter","query","filters","filteredLogs","undefined","startDate","endDate","userId","appSlug","offset","FileAdapter","fileConfig","currentFileSize","directory","fileName","enableRotation","enableCompression","logLevels","includeTimestamp","includeLevel","overwrite","append","setupFilePath","ensureDirectoryExists","path","join","dir","dirname","fs","existsSync","mkdirSync","recursive","includes","writeToFile","rotateIfNeeded","logLine","formatLogEntry","fileExists","writeFileSync","appendFileSync","baseLog","requestId","stats","statSync","size","rotateFile","basePath","replace","i","oldFile","newFile","unlinkSync","renameSync","cleanup","generateRequestId","prefix","id","Math","random","toString","substring","LoggerService","adapters","Map","overrides","createConfig","endsWith","validateConfig","Error","initializeAdapters","getInstance","instance","create","reset","consoleAdapter","set","memoryAdapter","databaseAdapter","fileAdapter","shouldLog","createLogEntry","generateId","Date","require","randomUUID","globalThis","crypto","c","r","generateUUID","promises","has","get","MEMORY","DATABASE","FILE","adapter","values","Promise","allSettled","debug","info","warn","fatal","adapterName","clearLogs","memory","database","file","maxMemory","maxDatabase","maxFile","adapterStats","updateConfig","newConfig","ServerLogger","logger","setRequestContext","request","headers","extractAppSlug","extractUserId","pathSegments","URL","url","pathname","split","appSlugIndex","findIndex","segment","apiIndex","authHeader","startsWith","createContext","additionalContext","serverLogger","getServerLogger","logApiError","logApiInfo","logApiWarn"],"mappings":"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"}